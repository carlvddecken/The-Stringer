<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Stringer - Professional Racquet Services</title>
  <meta property="og:title" content="The Stringer - Racquet Restringing & Repairs">
  <meta property="og:description" content="Quality squash and tennis racquet services in South Africa">
  
  <style>
    /* === YOUR ORIGINAL CSS (PRESERVED) === */
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #fff;
      color: #333;
    }
    header {
      background-color: #000;
      color: yellow;
      display: flex;
      align-items: center;
      padding: 1rem 2rem;
      justify-content: center;
      gap: 1rem;
    }
    header img {
      height: 60px;
      width: auto;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
      font-weight: 600;
    }
    .section {
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }
    .section h2 {
      color: #000;
      border-bottom: 2px solid yellow;
      padding-bottom: 0.5rem;
      font-weight: 600;
    }
    .services ul, .products ul {
      list-style: none;
      padding-left: 0;
    }
    .services li, .products li {
      margin: 1rem 0;
      padding: 0.5rem;
      background: #f0f0f0;
      border-left: 5px solid yellow;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .products img {
      width: 100px;
      height: auto;
      border: 1px solid #ccc;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .gallery img {
      width: 100%;
      height: auto;
      border: 1px solid #ccc;
    }
    .contact {
      background: #000;
      color: white;
      padding: 2rem;
      text-align: center;
    }
    .contact a {
      color: yellow;
      font-size: 1.2rem;
      text-decoration: none;
      margin: 0 1rem;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: #eee;
    }

    /* === CMS-SPECIFIC ADDITIONS === */
    /* Highlight editable areas in edit mode */
    [data-netlify-cms-active] [contenteditable="true"] {
      outline: 2px dashed rgba(255, 230, 0, 0.5);
      min-height: 20px;
    }
  </style>

  <!-- Preload critical CMS assets -->
  <link rel="preconnect" href="https://identity.netlify.com">
  <link rel="preconnect" href="https://unpkg.com">
</head>
<body>
  <header>
    <img src="./0d8692d9-9840-4f8d-b2a4-93cbbe0934c1.jpg" alt="The Stringer logo">
    <h1>The Stringer</h1>
  </header>

  <!-- === CMS-EDITABLE SECTIONS === -->
  <div class="section services">
    <h2>My Services</h2>
    {% raw %}{{ services }}{% endraw %}
  </div>

  <div class="section products">
    <h2>Products</h2>
    {% raw %}{{ products }}{% endraw %}
  </div>

  <div class="section">
    <h2>Gallery</h2>
    <div class="gallery">
      {% raw %}{% for image in gallery %}{% endraw %}
        <img src="{% raw %}{{ image }}{% endraw %}" alt="Gallery image">
      {% raw %}{% endfor %}{% endraw %}
    </div>
    <p style="font-size: 0.9rem; color: #555;">
      * Images managed via admin panel
    </p>
  </div>

  <!-- === STATIC CONTENT === -->
  <div class="contact">
    <h2>Contact Us</h2>
    <p>For bookings, quotes or questions:</p>
    <p>
      <a href="https://wa.me/27836175759" target="_blank">WhatsApp: 083 617 5759</a>
      <br/>
      <a href="mailto:carl@thestringer.co.za">Email: carl@thestringer.co.za</a>
    </p>
  </div>

  <footer>
    &copy; 2025 The Stringer. All rights reserved.
  </footer>

  <!-- === CMS INTEGRATION === -->
  <script>
    // Async load Netlify CMS
    (function() {
      // 1. Load Identity first
      var identityScript = document.createElement('script');
      identityScript.src = 'https://identity.netlify.com/v1/netlify-identity-widget.js';
      
      identityScript.onload = function() {
        // 2. Then load CMS
        var cmsScript = document.createElement('script');
        cmsScript.src = 'https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js';
        document.body.appendChild(cmsScript);
        
        // Initialize
        if (window.netlifyIdentity) {
          netlifyIdentity.on('init', user => {
            if (!user) {
              netlifyIdentity.on('login', () => {
                document.location.href = '/admin/';
              });
            }
          });
        }
      };
      
      document.body.appendChild(identityScript);
    })();

    // Content refresh handler
    document.addEventListener('DOMContentLoaded', function() {
      if (window.netlifyIdentity && netlifyIdentity.currentUser()) {
        window.addEventListener('message', function(event) {
          if (event.data === 'refresh-content') {
            window.location.reload();
          }
        });
      }
    });
  </script>
</body>
</html>
